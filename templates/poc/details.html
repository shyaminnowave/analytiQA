{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta name="csrf-token" content="{{ csrf_token }}">
  <title>Detail Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
    
  <!-- Ajax -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    
  <!-- jQuery -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #f8f9fa;
    }

    .navbar {
      z-index: 1030;
    }

    .sidebar {
      height: 100vh;
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      background: linear-gradient(135deg, #343a40, #23272b);
      padding-top: 1rem;
      color: white;
    }

    .sidebar .nav-link {
      color: #cfd8dc;
      font-weight: 500;
      padding: 0.75rem 1.25rem;
    }

    .sidebar .nav-link:hover,
    .sidebar .nav-link.active {
      background-color: #495057;
      color: #fff;
      border-radius: 0.375rem;
    }

    .main-content {
      margin-left: 240px;
      padding: 80px 30px 30px;
    }

    .content-container {
      background-color: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.05);
      margin-bottom: 25px;
    }

    .detail-header {
      border-bottom: 2px solid #e9ecef;
      padding-bottom: 15px;
      margin-bottom: 25px;
    }

    .detail-title {
      color: #343a40;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .detail-subtitle {
      color: #6c757d;
      font-size: 0.95rem;
      margin-bottom: 0;
    }

    .info-section {
      margin-bottom: 30px;
    }

    .info-section h5 {
      color: #495057;
      font-weight: 600;
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 1px solid #dee2e6;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .info-item {
      background-color: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #007bff;
    }

    .info-label {
      font-weight: 600;
      color: #495057;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 5px;
    }

    .info-value {
      color: #212529;
      font-size: 1rem;
      margin: 0;
    }

    .table-section {
      margin-top: 25px;
    }

    .table-container {
      background-color: #fff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.08);
    }

    .custom-table {
      margin-bottom: 0;
    }

    .custom-table thead {
      background: linear-gradient(135deg, #343a40, #23272b);
      color: white;
    }

    .custom-table th {
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.85rem;
      letter-spacing: 0.5px;
      padding: 15px 12px;
      border: none;
    }

    .custom-table td {
      padding: 12px;
      vertical-align: middle;
      border-color: #dee2e6;
    }

    .custom-table tbody tr:hover {
      background-color: #f8f9fa;
    }

    .status-badge {
      padding: 0.375rem 0.75rem;
      border-radius: 0.375rem;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-active {
      background-color: #d1e7dd;
      color: #0a3622;
    }

    .status-pending {
      background-color: #fff3cd;
      color: #664d03;
    }

    .status-inactive {
      background-color: #f8d7da;
      color: #58151c;
    }

    .description-text {
      line-height: 1.6;
      color: #495057;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .back-button {
      margin-bottom: 20px;
    }

    @media (max-width: 768px) {
      .sidebar {
        display: none;
      }

      .main-content {
        margin-left: 0;
        padding: 80px 15px 30px;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">InnoWave</a>
      <div class="d-flex">
        <span class="navbar-text text-white">Welcome, <strong>JohnDoe</strong></span>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <div class="sidebar">
    <ul class="nav flex-column px-3">
      <li class="nav-item mb-2">
        <a class="nav-link" href="{% url 'testcase' %}">
          <i class="bi bi-list-check me-2"></i> Test Case
        </a>
      </li>
      <li class="nav-item mb-2">
        <a class="nav-link active" href="{% url 'testplan' %}">
          <i class="bi bi-clipboard-data me-2"></i> Test Plan
        </a>
      </li>
      <li class="nav-item mb-2">
        <a class="nav-link" href="#">
          <i class="bi bi-eye me-2"></i> Details
        </a>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Back Button -->
    <div class="back-button">
      <a href="{% url 'testplan' %}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left me-2"></i>Back to List
      </a>
    </div>

    <!-- Detail Header -->
    <div class="content-container">
      <div class="detail-header">
        <h2 class="detail-title">{{ object.title|default:"Detail Information" }}</h2>
        <p class="detail-subtitle">Last updated: {{ object.updated_at|default:"June 30, 2025" }}</p>
      </div>

      <!-- Basic Information Section -->
      <div class="info-section">
        <h5><i class="bi bi-info-circle me-2"></i>Basic Information</h5>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">ID</div>
            <p class="info-value">{{ object.id|default:"#12345" }}</p>
          </div>
          <div class="info-item">
            <div class="info-label">Name</div>
            <p class="info-value">{{ object.name|default:"Sample Test Plan" }}</p>
          </div>
          <div class="info-item">
            <div class="info-label">Status</div>
            <p class="info-value">
              <span class="status-badge status-active">{{ object.status|default:"ACTIVE" }}</span>
            </p>
          </div>
          <div class="info-item">
            <div class="info-label">Priority</div>
            <p class="info-value">{{ object.priority|default:"High" }}</p>
          </div>
          <div class="info-item">
            <div class="info-label">Created By</div>
            <p class="info-value">{{ object.created_by|default:"John Doe" }}</p>
          </div>
          <div class="info-item">
            <div class="info-label">Created Date</div>
            <p class="info-value">{{ object.created_at|default:"June 15, 2025" }}</p>
          </div>
        </div>
      </div>

      <!-- Description Section -->
      <div class="info-section">
        <h5><i class="bi bi-file-text me-2"></i>Description</h5>
        <div class="description-text">
          {{ object.description|default:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur." }}
        </div>
      </div>

      <!-- Action Buttons -->
    </div>

    <!-- Related Data Table Section -->
    <div class="content-container">
      <div class="table-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5><i class="bi bi-table me-2"></i>Related Test Cases</h5>
          <button type="button" class="btn btn-sm btn-outline-primary">
            <i class="bi bi-plus-circle me-1"></i>Add New
          </button>
        </div>

        <div class="table-container">
          <table class="table custom-table table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Test Case Name</th>
                <th scope="col">Module</th>
                <th scope="col">Priority</th>
                <th scope="col">Status</th>
                  <th scope="col">Score</th>
              </tr>
            </thead>
            <tbody>
                
              <!-- Sample Data - Replace with your Django template loop -->
              {% for item in object.testcases.all %}
              <tr>
                <td><span class="fw-bold">{{ item.id }}</span></td>
                <td>{{ item.name }}</td>
                <td>
                  <span class="badge bg-primary">{{ item.module|default:"AUTH" }}</span>
                </td>
                <td>{{ item.priority|default:"High" }}</td>
                <td>
                  <span class="status-badge status-active">{{ item.status|default:"ACTIVE" }}</span>
                </td>
                <td>
                    <span class="score-badge">
                    {% for score in item.testcases.all %}
                      {% if score.testplan.id == object.id %}
                        {{ score.testscore|floatformat:2|default:"0.00" }}
                      {% endif %}
                    {% endfor %}
                  </span>
                </td>
              
                
              </tr>
           
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Additional Information Section -->
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Add any custom JavaScript functionality here
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize tooltips
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });

      // Add confirmation for delete actions
      document.querySelectorAll('.btn-outline-danger').forEach(button => {
        if (button.title === 'Delete' || button.textContent.includes('Delete')) {
          button.addEventListener('click', function(e) {
            if (!confirm('Are you sure you want to delete this item?')) {
              e.preventDefault();
            }
          });
        }
      });
    });
  </script>
</body>
</html>